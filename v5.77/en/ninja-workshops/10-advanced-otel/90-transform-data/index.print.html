<!doctype html><html lang=en dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=print><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=generator content="Relearn 7.2.1"><meta name=description content="In this section, we will explore the Transform Processor in the OpenTelemetry Collector. This processor allows you to modify trace, metric, and log data at runtime by performing actions like adding, updating, or deleting attributes. It’s a powerful tool to reshape telemetry data before it is exported to the backend.
By the end of this workshop, you will learn how to:
Use the Transform Processor to modify trace data. Apply transformations to attributes (e.g., renaming or deleting attributes). Update values in telemetry data dynamically. Overview of the Configuration The Transform Processor allows you to perform a variety of modifications to incoming telemetry data, including:"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Using the OpenTelemetry Transform Processor :: Splunk Observability Cloud Workshops"><meta name=twitter:description content="In this section, we will explore the Transform Processor in the OpenTelemetry Collector. This processor allows you to modify trace, metric, and log data at runtime by performing actions like adding, updating, or deleting attributes. It’s a powerful tool to reshape telemetry data before it is exported to the backend.
By the end of this workshop, you will learn how to:
Use the Transform Processor to modify trace data. Apply transformations to attributes (e.g., renaming or deleting attributes). Update values in telemetry data dynamically. Overview of the Configuration The Transform Processor allows you to perform a variety of modifications to incoming telemetry data, including:"><meta property="og:url" content="https://splunk.github.io/observability-workshop/v5.77/en/ninja-workshops/10-advanced-otel/90-transform-data/index.html"><meta property="og:site_name" content="Splunk Observability Cloud Workshops"><meta property="og:title" content="Using the OpenTelemetry Transform Processor :: Splunk Observability Cloud Workshops"><meta property="og:description" content="In this section, we will explore the Transform Processor in the OpenTelemetry Collector. This processor allows you to modify trace, metric, and log data at runtime by performing actions like adding, updating, or deleting attributes. It’s a powerful tool to reshape telemetry data before it is exported to the backend.
By the end of this workshop, you will learn how to:
Use the Transform Processor to modify trace data. Apply transformations to attributes (e.g., renaming or deleting attributes). Update values in telemetry data dynamically. Overview of the Configuration The Transform Processor allows you to perform a variety of modifications to incoming telemetry data, including:"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Using the OpenTelemetry Transform Processor :: Splunk Observability Cloud Workshops"><meta itemprop=description content="In this section, we will explore the Transform Processor in the OpenTelemetry Collector. This processor allows you to modify trace, metric, and log data at runtime by performing actions like adding, updating, or deleting attributes. It’s a powerful tool to reshape telemetry data before it is exported to the backend.
By the end of this workshop, you will learn how to:
Use the Transform Processor to modify trace data. Apply transformations to attributes (e.g., renaming or deleting attributes). Update values in telemetry data dynamically. Overview of the Configuration The Transform Processor allows you to perform a variety of modifications to incoming telemetry data, including:"><meta itemprop=dateModified content="2025-01-30T13:49:47+00:00"><meta itemprop=wordCount content="1013"><title>Using the OpenTelemetry Transform Processor :: Splunk Observability Cloud Workshops</title>
<link href=https://splunk.github.io/observability-workshop/v5.77/en/ninja-workshops/10-advanced-otel/90-transform-data/index.html rel=canonical type=text/html title="Using the OpenTelemetry Transform Processor :: Splunk Observability Cloud Workshops"><link href=/observability-workshop/v5.77/images/favicon.ico?1738252789 rel=icon type=image/x-icon sizes=any><link href=/observability-workshop/v5.77/css/fontawesome-all.min.css?1738252789 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.77/css/fontawesome-all.min.css?1738252789 rel=stylesheet></noscript><link href=/observability-workshop/v5.77/css/auto-complete.css?1738252789 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/observability-workshop/v5.77/css/auto-complete.css?1738252789 rel=stylesheet></noscript><link href=/observability-workshop/v5.77/css/perfect-scrollbar.min.css?1738252789 rel=stylesheet><link href=/observability-workshop/v5.77/css/theme.min.css?1738252789 rel=stylesheet><link href=/observability-workshop/v5.77/css/format-print.min.css?1738252789 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.relBasePath="../../../..",window.relearn.relBaseUri="../../../../../..",window.relearn.absBaseUri="https://splunk.github.io/observability-workshop/v5.77",window.relearn.min=`.min`,window.relearn.disableAnchorCopy=!1,window.relearn.disableAnchorScrolling=!1,window.relearn.themevariants=["auto","splunk-light","splunk-dark"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}}))},window.relearn.markVariant=function(){var t=window.localStorage.getItem(window.relearn.absBaseUri+"/variant"),e=document.querySelector("#R-select-variant");e&&(e.value=t)},window.relearn.initVariant=function(){var e=window.localStorage.getItem(window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.localStorage.setItem(window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant(),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web.js crossorigin=anonymous></script><script src=https://cdn.signalfx.com/o11y-gdi-rum/latest/splunk-otel-web-session-recorder.js crossorigin=anonymous></script><script>SplunkRum.init({realm:"us1",rumAccessToken:"dp3FKraOS_wVhe-l7eCOsA",applicationName:"observability-workshop",deploymentEnvironment:"splunk.github.io",version:"1.0"}),SplunkSessionRecorder.init({app:"observability-workshop",realm:"us1",rumAccessToken:"dp3FKraOS_wVhe-l7eCOsA"})</script></script><style>:root{--MAIN-WIDTH-MAX:130rem;--MENU-WIDTH-L:23rem}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=/observability-workshop/v5.77/en/ninja-workshops/10-advanced-otel/90-transform-data/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#overview-of-the-configuration>Overview of the Configuration</a><ul><li><a href=#example-yaml-configuration-for-the-transform-processor>Example YAML Configuration for the Transform Processor</a></li><li><a href=#key-sections-of-the-configuration>Key Sections of the Configuration</a></li></ul></li><li><a href=#step-1-review-the-yaml-configuration>Step 1: Review the YAML Configuration</a><ul><li><a href=#11-the-transform-processor>1.1 The Transform Processor</a></li><li><a href=#12-service-pipelines>1.2 Service Pipelines</a></li></ul></li><li><a href=#step-2-set-up-the-opentelemetry-collector>Step 2: Set Up the OpenTelemetry Collector</a><ul><li><a href=#21-save-the-configuration>2.1 Save the Configuration</a></li><li><a href=#22-run-the-opentelemetry-collector>2.2 Run the OpenTelemetry Collector</a></li></ul></li><li><a href=#step-3-simulate-trace-data>Step 3: Simulate Trace Data</a><ul><li><a href=#31-generate-sample-trace-data>3.1 Generate Sample Trace Data</a></li><li><a href=#32-observe-the-transformation>3.2 Observe the Transformation</a></li></ul></li><li><a href=#step-4-debug-and-monitor-the-transformations>Step 4: Debug and Monitor the Transformations</a><ul><li><a href=#41-monitor-the-logs>4.1 Monitor the Logs</a></li><li><a href=#42-customize-your-transformations>4.2 Customize Your Transformations</a></li></ul></li><li><a href=#step-5-extend-the-transform-processor>Step 5: Extend the Transform Processor</a><ul><li><a href=#51-update-multiple-attributes-based-on-conditions>5.1 Update Multiple Attributes Based on Conditions</a></li><li><a href=#52-use-advanced-conditions>5.2 Use Advanced Conditions</a></li><li><a href=#53-conditional-deletion>5.3 Conditional Deletion</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li><li><a href=#next-steps>Next Steps</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.77/en/index.html><span itemprop=name>Splunk Observability Workshops</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.77/en/ninja-workshops/index.html><span itemprop=name>Ninja Workshops</span></a><meta itemprop=position content="2">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=/observability-workshop/v5.77/en/ninja-workshops/10-advanced-otel/index.html><span itemprop=name>Advanced OpenTelemetry</span></a><meta itemprop=position content="3">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>9. Transform Data</span><meta itemprop=position content="4"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-print" data-content-empty=disable data-width-s=area-more data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.77/en/ninja-workshops/10-advanced-otel/90-transform-data/index.print.html title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a></div><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.77/en/ninja-workshops/10-advanced-otel/80-sensitive-data/index.html title="Removing Tags and Redacting Sensitive Data in OpenTelemetry Collector (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><a class=topbar-control href=/observability-workshop/v5.77/en/ninja-workshops/10-advanced-otel/95-routing/index.html title="Routing (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><button class=topbar-control onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable ninja-workshops" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=using-the-opentelemetry-transform-processor>Using the OpenTelemetry Transform Processor</h1><span class="badge cstyle primary badge-with-title"><span class=badge-title><i class="fa-fw fas fa-clock"></i></span><span class=badge-content>10 minutes</span>
</span>&nbsp;<p>In this section, we will explore the <strong>Transform Processor</strong> in the OpenTelemetry Collector. This processor allows you to modify trace, metric, and log data at runtime by performing actions like adding, updating, or deleting attributes. It’s a powerful tool to reshape telemetry data before it is exported to the backend.</p><p>By the end of this workshop, you will learn how to:</p><ul><li>Use the <strong>Transform Processor</strong> to modify trace data.</li><li>Apply transformations to attributes (e.g., renaming or deleting attributes).</li><li>Update values in telemetry data dynamically.</li></ul><hr><h2 id=overview-of-the-configuration>Overview of the Configuration</h2><p>The <strong>Transform Processor</strong> allows you to perform a variety of modifications to incoming telemetry data, including:</p><ul><li><strong>Add or Update Attributes</strong>: You can add or modify attribute values on traces, metrics, or logs.</li><li><strong>Delete Attributes</strong>: Remove unnecessary attributes to keep your telemetry data clean and efficient.</li><li><strong>Rename Attributes</strong>: Modify attribute keys for consistency across your observability pipeline.</li></ul><h3 id=example-yaml-configuration-for-the-transform-processor>Example YAML Configuration for the Transform Processor</h3><p>Here is an example configuration that demonstrates how to use the Transform Processor to modify trace data:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>processors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>transform</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>update</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>http.method</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=l>POST</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;attributes[&#34;http.method&#34;] == &#34;GET&#34;&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>new_attribute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;transformed_value&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>delete</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>old_attribute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>transform]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span></span></span></code></pre></div><h3 id=key-sections-of-the-configuration>Key Sections of the Configuration</h3><ol><li><p><strong><code>transform</code> processor</strong>: This is where the transformations on trace data are specified.</p><ul><li><strong><code>action: update</code></strong>: Update an attribute value based on a condition. In this case, the <code>http.method</code> attribute is updated from <code>GET</code> to <code>POST</code>.</li><li><strong><code>action: insert</code></strong>: Insert a new attribute <code>new_attribute</code> with a fixed value <code>"transformed_value"</code>.</li><li><strong><code>action: delete</code></strong>: Delete an existing attribute, here we remove <code>old_attribute</code>.</li></ul></li><li><p><strong>Service pipelines</strong>: The processor is applied as part of the <code>traces</code> pipeline, which receives traces from the <code>otlp</code> receiver and exports them to the <code>otlp</code> exporter.</p></li></ol><h2 id=step-1-review-the-yaml-configuration>Step 1: Review the YAML Configuration</h2><p>Let&rsquo;s break down the key sections of the YAML configuration that we will use in this workshop.</p><h3 id=11-the-transform-processor>1.1 The Transform Processor</h3><p>The <strong>Transform Processor</strong> is configured under the <code>processors</code> section. Here&rsquo;s how each transformation is specified:</p><h4 id=update-action>Update Action</h4><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>update</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>http.method</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=l>POST</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;attributes[&#34;http.method&#34;] == &#34;GET&#34;&#39;</span></span></span></code></pre></div><p>This action updates the <code>http.method</code> attribute. It looks for traces where the <code>http.method</code> is <code>"GET"</code> and changes it to <code>"POST"</code>.</p><h4 id=insert-action>Insert Action</h4><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>insert</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>new_attribute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;transformed_value&#34;</span></span></span></code></pre></div><p>This action inserts a new attribute, <code>new_attribute</code>, with a fixed value <code>"transformed_value"</code> to every trace processed.</p><h4 id=delete-action>Delete Action</h4><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>delete</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>old_attribute</span></span></span></code></pre></div><p>This action deletes an attribute called <code>old_attribute</code> from the trace data.</p><h3 id=12-service-pipelines>1.2 Service Pipelines</h3><p>In the <strong>service</strong> section, we define a pipeline that uses the <code>transform</code> processor.</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>pipelines</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>traces</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>receivers</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>processors</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>transform]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>exporters</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>otlp]</span></span></span></code></pre></div><p>This pipeline receives traces via the <code>otlp</code> receiver, processes them through the <code>transform</code> processor, and then exports them using the <code>otlp</code> exporter.</p><h2 id=step-2-set-up-the-opentelemetry-collector>Step 2: Set Up the OpenTelemetry Collector</h2><h3 id=21-save-the-configuration>2.1 Save the Configuration</h3><p>Save the YAML configuration to a file, e.g., <code>otel-collector-transform-config.yaml</code>.</p><h3 id=22-run-the-opentelemetry-collector>2.2 Run the OpenTelemetry Collector</h3><p>Start the OpenTelemetry Collector with your configuration:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>otelcol --config<span class=o>=</span>otel-collector-transform-config.yaml</span></span></code></pre></div><p>This will start the OpenTelemetry Collector with the transformation configuration.</p><h2 id=step-3-simulate-trace-data>Step 3: Simulate Trace Data</h2><h3 id=31-generate-sample-trace-data>3.1 Generate Sample Trace Data</h3><p>To test the transformation, you need to generate trace data with certain attributes.</p><ul><li>For example, a trace could include the <code>http.method</code> attribute set to <code>"GET"</code>, and you want the <code>http.method</code> to be transformed to <code>"POST"</code>.</li><li>You can use any instrumented application that sends trace data to the OpenTelemetry Collector. Alternatively, use a trace simulator or generate trace data manually.</li></ul><p>Make sure to include:</p><ul><li>A trace with the <code>http.method</code> attribute set to <code>"GET"</code>.</li><li>A trace with an <code>old_attribute</code> that should be deleted.</li></ul><h3 id=32-observe-the-transformation>3.2 Observe the Transformation</h3><p>Once you send the trace data, you should see the following transformations:</p><ul><li>Any <code>http.method</code> attribute with the value <code>"GET"</code> will be updated to <code>"POST"</code>.</li><li>The new attribute <code>new_attribute</code> will be added with the value <code>"transformed_value"</code>.</li><li>The <code>old_attribute</code> will be removed from the trace.</li></ul><p>You can view the transformed trace data in your exporter (e.g., Jaeger, Zipkin, or any other trace backend).</p><h2 id=step-4-debug-and-monitor-the-transformations>Step 4: Debug and Monitor the Transformations</h2><h3 id=41-monitor-the-logs>4.1 Monitor the Logs</h3><p>To ensure the transformations are working correctly, check the OpenTelemetry Collector logs. Look for log entries related to the transformation processing.</p><h3 id=42-customize-your-transformations>4.2 Customize Your Transformations</h3><p>You can modify the transformation actions to suit your needs. Here are some customization options:</p><ul><li><strong>Add multiple attributes</strong>: Insert multiple attributes with different conditions.</li><li><strong>Use conditions with complex expressions</strong>: Combine conditions with logical operators to match more complex attribute patterns.</li><li><strong>Apply transformations on specific trace types</strong>: Use different transformations for different trace types by modifying the condition.</li></ul><h2 id=step-5-extend-the-transform-processor>Step 5: Extend the Transform Processor</h2><h3 id=51-update-multiple-attributes-based-on-conditions>5.1 Update Multiple Attributes Based on Conditions</h3><p>You can update multiple attributes at once. For example, if you want to update the <code>http.status_code</code> and <code>http.method</code> attributes:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>update</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>http.status_code</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;200&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;attributes[&#34;http.status_code&#34;] == &#34;404&#34;&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>update</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>http.method</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;POST&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;attributes[&#34;http.method&#34;] == &#34;GET&#34;&#39;</span></span></span></code></pre></div><h3 id=52-use-advanced-conditions>5.2 Use Advanced Conditions</h3><p>Conditions can be as complex as needed. Here’s an example of updating attributes based on a combination of conditions:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>update</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>user_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;redacted&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;attributes[&#34;user_type&#34;] == &#34;admin&#34; and attributes[&#34;http.status_code&#34;] == &#34;403&#34;&#39;</span></span></span></code></pre></div><p>This transformation will only update the <code>user_id</code> attribute when the <code>user_type</code> is <code>"admin"</code> and the <code>http.status_code</code> is <code>"403"</code>.</p><h3 id=53-conditional-deletion>5.3 Conditional Deletion</h3><p>You can conditionally delete attributes based on specific criteria. For example:</p><div class="highlight wrap-code"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>action</span><span class=p>:</span><span class=w> </span><span class=l>delete</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class=l>sensitive_data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;attributes[&#34;http.status_code&#34;] == &#34;500&#34;&#39;</span></span></span></code></pre></div><p>This will delete the <code>sensitive_data</code> attribute from traces where the <code>http.status_code</code> is <code>"500"</code>.</p><hr><h2 id=conclusion>Conclusion</h2><p>In this section, you have learned how to use the <strong>Transform Processor</strong> in the OpenTelemetry Collector to modify trace data dynamically. You’ve seen how to:</p><ul><li>Update existing attributes based on conditions.</li><li>Insert new attributes.</li><li>Delete unwanted attributes.</li></ul><p>By leveraging the <strong>Transform Processor</strong>, you can efficiently modify telemetry data as it passes through the OpenTelemetry Collector, ensuring that only relevant and well-structured data is sent to your observability backends.</p><hr><h2 id=next-steps>Next Steps</h2><ul><li><strong>Extend the Transform Processor</strong>: Add more transformations based on different conditions.</li><li><strong>Integrate with Different Backends</strong>: Try exporting your transformed data to different observability backends like Prometheus, Jaeger, or Splunk.</li><li><strong>Explore Other Processors</strong>: Experiment with other processors like <code>batch</code>, <code>memory_limiter</code>, or <code>filter</code> to further enhance your telemetry processing pipeline.</li></ul><footer class=footline><span class="badge cstyle note badge-with-title"><span class=badge-title class=text-muted>Last Modified
</span><span class=badge-content>Jan 30, 2025</span></span></footer></article></div></main></div><script src=/observability-workshop/v5.77/js/clipboard.min.js?1738252789 defer></script><script src=/observability-workshop/v5.77/js/perfect-scrollbar.min.js?1738252789 defer></script><script src=/observability-workshop/v5.77/js/theme.js?1738252789 defer></script></body></html>